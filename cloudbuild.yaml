steps:
  - name: 'hashicorp/terraform:latest'
    args:
      - 'init'
    dir: './IAM'

  # Step to create a service account using a module
  - name: 'hashicorp/terraform:latest'
    args:
      - 'apply'
      - '-auto-approve'
    env:
      - 'TF_VAR_project_id=${PROJECT_ID}'
      - 'TF_VAR_service_account_name=my-service-account'
    dir: './IAM'

  